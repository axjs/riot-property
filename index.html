<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Riot-property : Create property triggered set, get, change events. Auto call update() when set value">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Riot-property</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/axjs/riot-property">View on GitHub</a>

          <h1 id="project_title">Riot-property</h1>
          <h2 id="project_tagline">Create property triggered set, get, change events. Auto call update() when set value</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/axjs/riot-property/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/axjs/riot-property/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a id="riot-property" class="anchor" href="#riot-property" aria-hidden="true"><span class="octicon octicon-link"></span></a>riot-property</h2>

<p><a href="https://muut.com/riotjs/"><img src="https://muut.com/riotjs/logo/riot60x.png" alt="Riot"></a> <code>mixin</code> and helpers for declarative and reactive developing.</p>

<ul>
<li>Named property triggered <strong>.set</strong>, <strong>.change</strong> events when set value</li>
<li>Can use <strong>setter</strong>, <strong>getter</strong>, <strong>checker</strong>  handlers</li>
<li>Can be set handler on value change</li>
<li>Isomorphic - work in tags and any observable objects</li>
<li>...</li>
</ul>

<h4>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-javascript"><pre><span class="pl-k">&lt;</span>timer<span class="pl-k">&gt;</span>

  <span class="pl-k">&lt;</span>p<span class="pl-k">&gt;</span>Seconds Elapsed<span class="pl-k">:</span> { time }<span class="pl-k">&lt;</span>/p<span class="pl-k">&gt;</span>

  <span class="pl-v">this</span>.mixin(<span class="pl-s"><span class="pl-pds">'</span>property<span class="pl-pds">'</span></span>)
  <span class="pl-v">this</span>.property(<span class="pl-s"><span class="pl-pds">'</span>time<span class="pl-pds">'</span></span>, opts.<span class="pl-c1">start</span> <span class="pl-k">||</span> <span class="pl-c1">0</span>, <span class="pl-v">this</span>.update)

  <span class="pl-en">tick</span>() {
    <span class="pl-v">this</span><span class="pl-c1">.time</span><span class="pl-k">++</span> <span class="pl-c">// Auto call update() when this.time changed</span>
  }

  <span class="pl-k">var</span> timer <span class="pl-k">=</span> <span class="pl-c1">setInterval</span>(<span class="pl-v">this</span>.tick, <span class="pl-c1">1000</span>)

  <span class="pl-v">this</span>.on(<span class="pl-s"><span class="pl-pds">'</span>unmount<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>() {
    <span class="pl-c1">clearInterval</span>(timer)
  })

<span class="pl-k">&lt;</span>/timer<span class="pl-k">&gt;</span></pre></div>

<h4>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h4>

<p>Create property in riot tag</p>

<div class="highlight highlight-javascript"><pre>  <span class="pl-v">this</span>.property(name, [value], [onchange | options])</pre></div>

<p>Create property in observable object</p>

<div class="highlight highlight-javascript"><pre>  riot.property(observer, name, [ value ], [ onchange | options ])</pre></div>

<p>Create properties</p>

<div class="highlight highlight-javascript"><pre>  <span class="pl-c">// in riot tag</span>
  <span class="pl-v">this</span>.properties(values, [ onchange | options ])

  <span class="pl-c">// in observable object</span>
  riot.properties(observer, values, [ onchange | options])</pre></div>

<ul>
<li>
<code>name</code> - property name</li>
<li>
<code>value</code> - property init wthis this value</li>
<li>
<code>onchange</code> - callback function called when property value change</li>
<li>
<code>observer</code> - riot observable object</li>
<li>
<code>values</code> - object in which the keys and values are properties <code>name</code> and <code>value</code>
</li>
<li>
<code>options</code> - object with optional keys <code>setter</code>, <code>getter</code>, <code>checker</code>, <code>onchange</code>, <code>onset</code>
</li>
</ul>

<h4>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h4>

<p>Init mixin </p>

<div class="highlight highlight-javascript"><pre>  <span class="pl-v">this</span>.mixin(<span class="pl-s"><span class="pl-pds">'</span>property<span class="pl-pds">'</span></span>)</pre></div>

<p>Create property by name and optional init value </p>

<div class="highlight highlight-javascript"><pre>  <span class="pl-v">this</span>.property(<span class="pl-s"><span class="pl-pds">'</span>time<span class="pl-pds">'</span></span>, <span class="pl-c1">0</span>)</pre></div>

<p>Listen property events <code>{property_name}.{event_type}</code></p>

<div class="highlight highlight-javascript"><pre>  <span class="pl-v">this</span>.on(<span class="pl-s"><span class="pl-pds">'</span>time.set<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">value</span>) {...})
  <span class="pl-v">this</span>.on(<span class="pl-s"><span class="pl-pds">'</span>time.change<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">value</span>) {...})
  <span class="pl-v">this</span>.on(<span class="pl-s"><span class="pl-pds">'</span>time.check<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">value</span>) {...})</pre></div>

<p>Listen events of all object properties <code>*.{event_type}</code></p>

<div class="highlight highlight-javascript"><pre>  <span class="pl-v">this</span>.on(<span class="pl-s"><span class="pl-pds">'</span>*.set<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">name</span>, <span class="pl-smi">value</span>) {...})
  <span class="pl-v">this</span>.on(<span class="pl-s"><span class="pl-pds">'</span>*.change<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">name</span>, <span class="pl-smi">value</span>) {...})
  <span class="pl-v">this</span>.on(<span class="pl-s"><span class="pl-pds">'</span>*.check<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">name</span>, <span class="pl-smi">value</span>) {...})</pre></div>

<p>Create many properties</p>

<div class="highlight highlight-javascript"><pre>  <span class="pl-v">this</span>.properties({
    data<span class="pl-k">:</span> {},
    time<span class="pl-k">:</span> <span class="pl-c1">Date</span>.now(),
    counter<span class="pl-k">:</span> <span class="pl-c1">0</span>
  })</pre></div>

<p>Set property options</p>

<div class="highlight highlight-javascript"><pre>  <span class="pl-v">this</span>.property(<span class="pl-s"><span class="pl-pds">'</span>time<span class="pl-pds">'</span></span>, <span class="pl-c1">0</span>, {
    <span class="pl-en">setter</span>: <span class="pl-k">function</span> (<span class="pl-smi">value</span>) { <span class="pl-k">return</span> value / <span class="pl-c1">1000</span> },
    <span class="pl-en">getter</span>: <span class="pl-k">function</span> (<span class="pl-smi">value</span>) { <span class="pl-k">return</span> value <span class="pl-k">*</span> <span class="pl-c1">1000</span> },
    <span class="pl-en">checker</span>: <span class="pl-k">function</span> (<span class="pl-smi">value</span>) { <span class="pl-k">return</span> value <span class="pl-k">&lt;</span> <span class="pl-c1">0</span> },
    <span class="pl-c">// callbacks</span>
    <span class="pl-en">onchange</span>: <span class="pl-k">function</span> () { <span class="pl-v">this</span>.update() },
    <span class="pl-en">onset</span>: <span class="pl-k">function</span> () { <span class="pl-v">this</span>.save() },
  })</pre></div>

<p>Set property to observable object by <code>riot.property</code></p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">function</span> <span class="pl-en">Store</span>() {
  <span class="pl-k">if</span> (<span class="pl-k">!</span>(<span class="pl-v">this</span> <span class="pl-k">instanceof</span> Store)) <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-en">Store</span>()

  riot.observable(<span class="pl-v">this</span>)

  riot.property(<span class="pl-v">this</span>, <span class="pl-s"><span class="pl-pds">'</span>data<span class="pl-pds">'</span></span>, [])

  <span class="pl-v">this</span>.on(<span class="pl-s"><span class="pl-pds">'</span>data.set<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">data</span>) {
    <span class="pl-v">this</span>.save(data)
  })
  ...
} 

<span class="pl-k">var</span> store <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Store</span>()
store.<span class="pl-c1">data</span> <span class="pl-k">=</span> [<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>] <span class="pl-c">// trigger data.set event</span></pre></div>

<p>Prevent auto call <code>onchange</code> callback when change property</p>

<div class="highlight highlight-javascript"><pre>  <span class="pl-v">this</span>.preventOnchange <span class="pl-k">=</span> <span class="pl-c1">true</span>

  <span class="pl-c">// onchange callback not run</span>
  <span class="pl-v">this</span><span class="pl-c1">.time</span><span class="pl-k">++</span>

  <span class="pl-v">this</span>.preventOnchange <span class="pl-k">=</span> <span class="pl-c1">false</span></pre></div>

<p><a href="LICENSE.txt"><img src="http://img.shields.io/badge/license-MIT-000000.svg?style=flat-square" alt="MIT License"></a></p>

<p><a href="https://muut.com/riotjs/forum/"><img src="https://img.shields.io/badge/muut-JOIN_CHAT%E2%86%92-ff0044.svg?style=flat-square" alt="Riot Forum"></a>
<a href="https://gitter.im/axjs/riot-property?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://img.shields.io/badge/GITTER-JOIN_CHAT_%E2%86%92-1dce73.svg?style=flat-square" alt="Join the chat at https://gitter.im/axjs/riot-property"></a></p>


      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Riot-property maintained by <a href="https://github.com/axjs">axjs</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
